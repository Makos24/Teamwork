(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{52:function(t,e,a){"use strict";a.r(e);var s=a(9),n=a(10),o=a(13),c=a(11),r=a(12),i=a(0),m=a.n(i),l=a(2),h=a.n(l),u=a(7),d=a(6),p=a(20),b=a(21),v={id:"",body:"",name:""},y=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(c.a)(e).call(this,t))).state={show:!1,comments:[],comment:""},a.toggle=a.toggle.bind(Object(d.a)(a)),a.onChange=a.onChange.bind(Object(d.a)(a)),a.addComment=a.addComment.bind(Object(d.a)(a)),a}return Object(r.a)(e,t),Object(n.a)(e,[{key:"toggle",value:function(){var t=this;this.state.show||Object(b.c)("/articles/"+this.props.post.id+"/comments").then((function(e){var a=e;"success"===a.status&&(console.log(a.data),t.setState({comments:a.data}))})),this.setState((function(t){return{show:!t.show}}))}},{key:"getComments",value:function(){var t=this;if(this.state.comments)return Object.keys(this.state.comments).map((function(e){return t.state.comments[e]}))}},{key:"onChange",value:function(t){this.setState(Object(p.a)({},t.target.name,t.target.value))}},{key:"addComment",value:function(){var t=this;if(this.state.comment){var e={id:(new Date).getTime(),body:this.state.comment,name:h.a.get("twk-userData").name};Object(b.b)("/articles/"+this.props.post.id+"/comments",e).then((function(a){var s=a;"success"===s.status&&(console.log(s.data),t.setState((function(t){var a=t.comments;return a[e.id]=e,{comments:a}})),t.setState({comment:Object.assign({},v)}))}))}}},{key:"render",value:function(){var t=[];return this.getComments()&&this.getComments().forEach((function(e){t.push(m.a.createElement("div",{key:e.id,className:"shadow-sm p-2 m-2 col-md-10"},m.a.createElement("h6",null,e.name),e.body))})),m.a.createElement("div",null,m.a.createElement("button",{onClick:this.toggle,className:"btn btn-primary"},this.state.show?"Hide":"Show"," Comments"),m.a.createElement("div",{className:"col-md-11 mt-3"},this.state.show&&m.a.createElement("div",null,m.a.createElement("div",{className:"row"},t),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-md-10"},m.a.createElement("textarea",{name:"comment",onChange:this.onChange,className:"form-control",value:this.state.comment.body})),m.a.createElement("div",{className:"col-md-2"},m.a.createElement("button",{className:"btn btn-primary",onClick:this.addComment},"Add Comment"))))))}}]),e}(m.a.Component),f=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(c.a)(e).call(this,t))).destroy=a.destroy.bind(Object(d.a)(a)),a}return Object(r.a)(e,t),Object(n.a)(e,[{key:"destroy",value:function(){this.props.onDestroy(this.props.post.id)}},{key:"render",value:function(){return m.a.createElement("div",{className:"col-md-10"},m.a.createElement("div",{className:"card"},m.a.createElement("h4",{className:"shadow-sm p-3 m-2"},this.props.post.name),m.a.createElement("div",{className:"card-body"},m.a.createElement("h5",{className:"card-title"},this.props.post.title),this.props.post.body.search("http://res.cloudinary.com")?m.a.createElement("p",{className:"card-text"},this.props.post.body):m.a.createElement("img",{className:"img-fluid img-thumbnail",src:this.props.post.body,alt:this.props.post.title}),m.a.createElement("div",{className:""},m.a.createElement(y,{key:this.props.post.id,post:this.props.post})))))}}]),e}(m.a.Component),j=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(c.a)(e).call(this,t))).handleDestroy=a.handleDestroy.bind(Object(d.a)(a)),a.state={sort:{column:"name",direction:"desc"}},a}return Object(r.a)(e,t),Object(n.a)(e,[{key:"handleDestroy",value:function(t){this.props.onDestroy(t)}},{key:"getPosts",value:function(){var t=this;return Object.keys(this.props.posts).map((function(e){return t.props.posts[e]}))}},{key:"render",value:function(){var t=this,e=[];return this.getPosts().forEach((function(a){e.push(m.a.createElement(f,{post:a,key:a.id,onDestroy:t.handleDestroy}))})),m.a.createElement("div",{className:"row"},e)}}]),e}(m.a.Component),O=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(c.a)(e).call(this,t))).state={posts:""},a}return Object(r.a)(e,t),Object(n.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(b.c)("/articles").then((function(e){var a=e;"success"===a.status&&(console.log(a.data),t.setState({posts:a.data}))}))}},{key:"render",value:function(){return h.a.get("twk-userData")?m.a.createElement("div",{className:"App container mt-5 mb-5"},m.a.createElement("div",{className:"mt-5 mb-5"}),m.a.createElement("div",{className:"container"},m.a.createElement("h1",null,"Recent Posts"),m.a.createElement(j,{posts:this.state.posts,onDestroy:this.handleDestroy}))):m.a.createElement(u.a,{to:"/login"})}}]),e}(m.a.Component);e.default=O}}]);
//# sourceMappingURL=4.da863fba.chunk.js.map