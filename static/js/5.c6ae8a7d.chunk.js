(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],{51:function(t,e,a){"use strict";var s=a(10),n=a(11),o=a(13),c=a(12),r=a(6),i=a(14),m=a(0),l=a.n(m),d=a(21),u=a(20),h=a(1),p=a.n(h),b={id:"",body:"",name:""},v=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(c.a)(e).call(this,t))).state={show:!1,comments:[],comment:""},a.toggle=a.toggle.bind(Object(r.a)(a)),a.onChange=a.onChange.bind(Object(r.a)(a)),a.addComment=a.addComment.bind(Object(r.a)(a)),a}return Object(i.a)(e,t),Object(n.a)(e,[{key:"toggle",value:function(){var t=this;this.state.show||(this.props.post.body.search("http://res.cloudinary.com")?Object(u.d)("/gifs/"+this.props.post.id+"/comments").then((function(e){var a=e;"success"===a.status&&(console.log(a.data),t.setState({comments:a.data}))})):Object(u.d)("/articles/"+this.props.post.id+"/comments").then((function(e){var a=e;"success"===a.status&&(console.log(a.data),t.setState({comments:a.data}))}))),this.setState((function(t){return{show:!t.show}}))}},{key:"getComments",value:function(){var t=this;if(this.state.comments)return Object.keys(this.state.comments).map((function(e){return t.state.comments[e]}))}},{key:"onChange",value:function(t){this.setState(Object(d.a)({},t.target.name,t.target.value))}},{key:"addComment",value:function(){var t=this;if(this.state.comment){var e={id:(new Date).getTime(),body:this.state.comment,name:p.a.get("twk-userData").name};Object(u.c)("/articles/"+this.props.post.id+"/comments",e).then((function(a){var s=a;"success"===s.status&&(console.log(s.data),t.setState((function(t){var a=t.comments;return a[e.id]=e,{comments:a}})),t.setState({comment:Object.assign({},b)}))}))}}},{key:"render",value:function(){var t=[];return this.getComments()&&this.getComments().forEach((function(e){t.push(l.a.createElement("div",{key:e.id,className:"shadow-sm p-2 m-2 col-md-10"},l.a.createElement("h6",null,e.name),e.body))})),l.a.createElement("div",null,l.a.createElement("button",{onClick:this.toggle,className:"btn btn-primary"},this.state.show?"Hide":"Show"," Comments"),l.a.createElement("div",{className:"col-md-11 mt-3"},this.state.show&&l.a.createElement("div",null,l.a.createElement("div",{className:"row"},t),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-10"},l.a.createElement("textarea",{name:"comment",onChange:this.onChange,className:"form-control",value:this.state.comment.body})),l.a.createElement("div",{className:"col-md-2"},l.a.createElement("button",{className:"btn btn-primary",onClick:this.addComment},"Add Comment"))))))}}]),e}(l.a.Component),f=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(c.a)(e).call(this,t))).destroy=a.destroy.bind(Object(r.a)(a)),a}return Object(i.a)(e,t),Object(n.a)(e,[{key:"destroy",value:function(){var t=this;window.confirm("Are you sure you want to delete this article?")&&Object(u.a)("/articles/"+this.props.post.id).then((function(e){"success"===e.status&&t.props.onDestroy(t.props.post.id)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"col-md-10"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"d-flex"},l.a.createElement("h4",{className:"shadow-sm m-2 flex-grow-1"},this.props.post.name)," ",l.a.createElement("button",{className:"btn btn-sm btn-info"},"Edit"),l.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.destroy},"Delete")),l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},this.props.post.title),this.props.post.body.search("http://res.cloudinary.com")?l.a.createElement("p",{className:"card-text"},this.props.post.body):l.a.createElement("img",{className:"img-fluid img-thumbnail",src:this.props.post.body,alt:this.props.post.title}),l.a.createElement("div",{className:""},l.a.createElement(v,{key:this.props.post.id,post:this.props.post})))))}}]),e}(l.a.Component),y=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(c.a)(e).call(this,t))).handleDestroy=a.handleDestroy.bind(Object(r.a)(a)),a.state={sort:{column:"name",direction:"desc"}},a}return Object(i.a)(e,t),Object(n.a)(e,[{key:"handleDestroy",value:function(t){this.props.onDestroy(t)}},{key:"getPosts",value:function(){var t=this;return Object.keys(this.props.posts).map((function(e){return t.props.posts[e]}))}},{key:"render",value:function(){var t=this,e=[];return this.getPosts().forEach((function(a){e.push(l.a.createElement(f,{post:a,key:a.id*Math.random(),onDestroy:t.handleDestroy}))})),l.a.createElement("div",{className:"row"},e)}}]),e}(l.a.Component);e.a=y},53:function(t,e,a){"use strict";a.r(e);var s=a(10),n=a(11),o=a(13),c=a(12),r=a(14),i=a(0),m=a.n(i),l=a(1),d=a.n(l),u=a(7),h=a(51),p=a(20),b=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(o.a)(this,Object(c.a)(e).call(this,t))).state={posts:""},a}return Object(r.a)(e,t),Object(n.a)(e,[{key:"componentDidMount",value:function(){var t=this;Object(p.d)("/gifs").then((function(e){var a=e;"success"===a.status&&(console.log(a.data),t.setState({posts:a.data}))}))}},{key:"render",value:function(){return d.a.get("twk-userData")?m.a.createElement("div",{className:"App container mt-5 mb-5"},m.a.createElement("div",{className:"mt-5 mb-5"}),m.a.createElement("div",{className:"container"},m.a.createElement("h1",null,"Recent Gifs"),m.a.createElement(h.a,{posts:this.state.posts,onDestroy:this.handleDestroy}))):m.a.createElement(u.a,{to:"/login"})}}]),e}(m.a.Component);e.default=b}}]);
//# sourceMappingURL=5.c6ae8a7d.chunk.js.map