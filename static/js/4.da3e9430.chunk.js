(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[4],{51:function(e,t,a){"use strict";var n=a(10),s=a(11),c=a(13),o=a(12),l=a(6),i=a(14),r=a(0),m=a.n(r),h=a(21),u=a(20),d=a(1),b=a.n(d),p={id:"",body:"",name:""},v=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={show:!1,comments:[],comment:""},a.toggle=a.toggle.bind(Object(l.a)(a)),a.onChange=a.onChange.bind(Object(l.a)(a)),a.addComment=a.addComment.bind(Object(l.a)(a)),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"toggle",value:function(){var e=this;this.state.show||(this.props.post.body.search("http://res.cloudinary.com")?Object(u.d)("/gifs/"+this.props.post.id+"/comments").then((function(t){var a=t;"success"===a.status&&(console.log(a.data),e.setState({comments:a.data}))})):Object(u.d)("/articles/"+this.props.post.id+"/comments").then((function(t){var a=t;"success"===a.status&&(console.log(a.data),e.setState({comments:a.data}))}))),this.setState((function(e){return{show:!e.show}}))}},{key:"getComments",value:function(){var e=this;if(this.state.comments)return Object.keys(this.state.comments).map((function(t){return e.state.comments[t]}))}},{key:"onChange",value:function(e){this.setState(Object(h.a)({},e.target.name,e.target.value))}},{key:"addComment",value:function(){var e=this;if(this.state.comment){var t={id:(new Date).getTime(),body:this.state.comment,name:b.a.get("twk-userData").name};Object(u.c)("/articles/"+this.props.post.id+"/comments",t).then((function(a){var n=a;"success"===n.status&&(console.log(n.data),e.setState((function(e){var a=e.comments;return a[t.id]=t,{comments:a}})),e.setState({comment:Object.assign({},p)}))}))}}},{key:"render",value:function(){var e=[];return this.getComments()&&this.getComments().forEach((function(t){e.push(m.a.createElement("div",{key:t.id,className:"shadow-sm p-2 m-2 col-md-10"},m.a.createElement("h6",null,t.name),t.body))})),m.a.createElement("div",null,m.a.createElement("button",{onClick:this.toggle,className:"btn btn-primary"},this.state.show?"Hide":"Show"," Comments"),m.a.createElement("div",{className:"col-md-11 mt-3"},this.state.show&&m.a.createElement("div",null,m.a.createElement("div",{className:"row"},e),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-md-10"},m.a.createElement("textarea",{name:"comment",onChange:this.onChange,className:"form-control",value:this.state.comment.body})),m.a.createElement("div",{className:"col-md-2"},m.a.createElement("button",{className:"btn btn-primary",onClick:this.addComment},"Add Comment"))))))}}]),t}(m.a.Component),g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).destroy=a.destroy.bind(Object(l.a)(a)),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"destroy",value:function(){var e=this;window.confirm("Are you sure you want to delete this article?")&&Object(u.a)("/articles/"+this.props.post.id).then((function(t){"success"===t.status&&e.props.onDestroy(e.props.post.id)}))}},{key:"render",value:function(){return m.a.createElement("div",{className:"col-md-10"},m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"d-flex"},m.a.createElement("h4",{className:"shadow-sm m-2 flex-grow-1"},this.props.post.name)," ",m.a.createElement("button",{className:"btn btn-sm btn-info"},"Edit"),m.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:this.destroy},"Delete")),m.a.createElement("div",{className:"card-body"},m.a.createElement("h5",{className:"card-title"},this.props.post.title),this.props.post.body.search("http://res.cloudinary.com")?m.a.createElement("p",{className:"card-text"},this.props.post.body):m.a.createElement("img",{className:"img-fluid img-thumbnail",src:this.props.post.body,alt:this.props.post.title}),m.a.createElement("div",{className:""},m.a.createElement(v,{key:this.props.post.id,post:this.props.post})))))}}]),t}(m.a.Component),f=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).handleDestroy=a.handleDestroy.bind(Object(l.a)(a)),a.state={sort:{column:"name",direction:"desc"}},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"handleDestroy",value:function(e){this.props.onDestroy(e)}},{key:"getPosts",value:function(){var e=this;return Object.keys(this.props.posts).map((function(t){return e.props.posts[t]}))}},{key:"render",value:function(){var e=this,t=[];return this.getPosts().forEach((function(a){t.push(m.a.createElement(g,{post:a,key:a.id*Math.random(),onDestroy:e.handleDestroy}))})),m.a.createElement("div",{className:"row"},t)}}]),t}(m.a.Component);t.a=f},55:function(e,t,a){"use strict";a.r(t);var n=a(10),s=a(11),c=a(13),o=a(12),l=a(6),i=a(14),r=a(0),m=a.n(r),h=a(1),u=a.n(h),d=a(7),b=a(51),p=a(20),v={category_id:"",title:"",body:"",name:""},g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(l.a)(a)),a.handleSave=a.handleSave.bind(Object(l.a)(a)),a.toggle=a.toggle.bind(Object(l.a)(a)),a.state={show:!1,article:Object.assign({},v),errors:{}},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"toggle",value:function(){this.setState((function(e){return{show:!e.show}}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState((function(e){return e.article[n]=a,{article:e.article}}))}},{key:"handleSave",value:function(){var e=this;if(this.state.article){var t={title:this.state.article.title,body:this.state.article.body,category_id:1};Object(p.c)("/articles/",t).then((function(t){var a=t;"success"===a.status&&(console.log(a.data),e.props.onSave(e.state.article),e.setState({article:Object.assign({},v)}),e.toggle())}))}}},{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement("button",{onClick:this.toggle,className:"btn btn-primary"},this.state.show?"Close Create Post":"Create Post"),m.a.createElement("div",{className:"col-md-11 mt-3"},this.state.show&&m.a.createElement("form",{className:"form-vertical col-md-8"},m.a.createElement("h3",null,"Create New Article"),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label"},"Title"),m.a.createElement("input",{type:"text",name:"title",className:"form-control",onChange:this.handleChange,value:this.state.article.title})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",null,"Body"),m.a.createElement("textarea",{className:"form-control",type:"text",name:"body",onChange:this.handleChange,value:this.state.article.body}),m.a.createElement("input",{type:"hidden",value:"1",name:"category_id"})),m.a.createElement("input",{type:"button",className:"btn btn-success",value:"Save",onClick:this.handleSave}))))}}]),t}(m.a.Component),f={title:""},y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(l.a)(a)),a.handleChanges=a.handleChanges.bind(Object(l.a)(a)),a.handleSave=a.handleSave.bind(Object(l.a)(a)),a.toggle=a.toggle.bind(Object(l.a)(a)),a.state={show:!1,image:null,gif:Object.assign({},f),errors:{}},a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"toggle",value:function(){this.setState((function(e){return{show:!e.show}}))}},{key:"handleChanges",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState((function(e){return e.gif[n]=a,{gif:e.gif}}))}},{key:"handleChange",value:function(e){this.setState({image:e.target.files[0]})}},{key:"handleSave",value:function(e){var t=this;if(e.preventDefault(),""!==this.state.gif.title&&this.state.image){var a=new FormData;a.append("image",this.state.image,this.state.image.name),a.append("title",this.state.gif.title),console.log(a),Object(p.c)("/gifs/",a).then((function(e){var a=e;"success"===a.status&&(console.log(a.data),t.props.onSave(t.state.gif),t.setState({gif:Object.assign({},f)}),t.toggle())}))}else alert("All fields are required")}},{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement("button",{onClick:this.toggle,className:"btn btn-primary"},this.state.show?"Close Upload":"Upload Image"),m.a.createElement("div",{className:"col-md-11 mt-3"},this.state.show&&m.a.createElement("form",{className:"form-vertical col-md-8"},m.a.createElement("h3",null,"Upload New Image"),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"control-label"},"Title"),m.a.createElement("input",{type:"text",name:"title",className:"form-control",onChange:this.handleChanges,value:this.state.gif.title})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",null,"Image"),m.a.createElement("input",{className:"form-control",type:"file",name:"image",onChange:this.handleChange})),m.a.createElement("input",{type:"submit",className:"btn btn-success",value:"Upload",onClick:this.handleSave}))))}}]),t}(m.a.Component),E=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={posts:""},a.handleDestroy=a.handleDestroy.bind(Object(l.a)(a)),a.saveArticle=a.saveArticle.bind(Object(l.a)(a)),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(p.d)("/feed").then((function(t){var a=t;"success"===a.status&&e.setState({posts:a.data})}))}},{key:"saveArticle",value:function(e){e.id||(e.id=(new Date).getTime(),e.name=u.a.get("twk-userData").name),this.setState((function(t){var a=t.posts;return a[e.id]=e,{posts:a}}))}},{key:"handleDestroy",value:function(e){this.setState((function(t){var a=t.posts;return delete a[e],{posts:a}}))}},{key:"render",value:function(){return u.a.get("twk-userData")?m.a.createElement("div",{className:"App container mt-5 mb-5"},m.a.createElement("div",{className:"mt-5 mb-5"}),m.a.createElement("div",{className:"container"},m.a.createElement("h1",null,"Recent Posts"),m.a.createElement(g,{onSave:this.saveArticle}),m.a.createElement(y,{onSave:this.saveArticle}),m.a.createElement(b.a,{posts:this.state.posts,onDestroy:this.handleDestroy}))):m.a.createElement(d.a,{to:"/login"})}}]),t}(m.a.Component);t.default=E}}]);
//# sourceMappingURL=4.da3e9430.chunk.js.map